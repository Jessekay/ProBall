<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details - ProBall Rwanda</title>
    <link rel="stylesheet" href="./css/styles.css">
    <script src="https://kit.fontawesome.com/64d58efce2.js" crossorigin="anonymous"></script>
</head>
<body>
    <header>
        <div class="logo"><a href="index.html">ProBall Rwanda</a></div>
        <ul class="navlist">
            <li><a href="index.html">Home</a></li>
            <li><a href="index.html#why-proball">Why us?</a></li>
            <li class="dropdown">
                <a href="#">Categories</a>
                <ul class="categories-items">
                    <li><a class="dropdown-a" href="football.html">Football</a></li>
                    <li><a class="dropdown-a" href="basketball.html">Basketball</a></li>
                    <li><a class="dropdown-a" href="rugby.html">Rugby</a></li>
                </ul>
            </li>
            <li><a href="index.html#contact">Contact</a></li>
        </ul>
        <div class="right-content">
            <a href="profile.html" class="nav-btn">Profile</a>
            <a href="cart.html" class="nav-btn">Cart</a>
        </div>
    </header>

    <section class="hero">
        <div class="hero-text">
            <h1 id="product-name"></h1>
            <h5 id="product-sport"></h5>
            <p id="product-description"></p>
            <p id="product-price"></p>
            <div class="main-hero">
                <input type="number" id="quantity" class="input-field" value="1" min="1">
                <button class="btn" onclick="addToCart()">Add to Cart</button>
            </div>
            <div id="message" style="display: none; margin-top: 20px; color: var(--main-color);"></div>
        </div>
        <div>
            <img id="product-image" class="hero-img" alt="Product Image">
        </div>
    </section>

    <footer class="footer">
        <div class="contact-footer">
            <div>
                <h3>Contact Us</h3>
                <hr class="contact-hr">
                <p><i class="fab fa-instagram"></i> @proball</p>
                <p><i class="fas fa-phone"></i> +250787667797</p>
            </div>
            <div>
                <h3>Address</h3>
                <hr class="address-hr">
                <p>KG 242 Street</p>
                <p>Jesse's PLAZA</p>
            </div>
        </div>
        <hr class="copyright-hr">
        <div class="copyright">
            <p>Â© 2025 ProBall Rwanda, Inc</p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            document.getElementById('product-name').textContent = params.get('name');
            document.getElementById('product-sport').textContent = params.get('sport');
            document.getElementById('product-description').textContent = params.get('name') === 'Pitch Ball' ? 'Bright, durable, and match-ready.' : 
                                                                     params.get('name') === 'Strike Ball' ? 'Durable, precise, and built for power.' : 
                                                                     'Champions League-inspired.';
            document.getElementById('product-price').textContent = `$${params.get('price')}`;
            document.getElementById('product-image').src = `images/${params.get('name').toLowerCase().replace(' ', '-')}-ball.png`;
        });

        function addToCart() {
            const params = new URLSearchParams(window.location.search);
            const name = params.get('name');
            const sport = params.get('sport');
            const price = parseFloat(params.get('price'));
            const quantity = parseInt(document.getElementById('quantity').value);

            if (quantity < 1) {
                showMessage('Please enter a valid quantity.', false);
                return;
            }

            fetch('add_to_cart.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name, sport, price, quantity })
            })
            .then(response => response.json())
            .then(data => showMessage(data.message, data.success))
            .catch(() => showMessage('Error adding to cart.', false));
        }

        function showMessage(text, isSuccess) {
            const messageDiv = document.getElementById('message');
            messageDiv.textContent = text;
            messageDiv.style.color = isSuccess ? 'var(--main-color)' : '#ff0000';
            messageDiv.style.display = 'block';
            setTimeout(() => messageDiv.style.display = 'none', 3000);
        }
    </script>